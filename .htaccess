# Flat CMS multilingual URL rewrite
RewriteEngine On

# Always redirect to /en/ if no language prefix (optional, can be commented)
#RewriteCond %{REQUEST_URI} !^/(en|fr|es|de)/
#RewriteRule ^(.*)$ /en/$1 [L,R=301]

# Remove trailing slash (optional)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R=301,L]

# Route language-prefixed URLs to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(en|fr|es|de)/(.*)$ index.php [QSA,L]
RewriteRule ^(en|fr|es|de)$ index.php [QSA,L]

# Route all other requests to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]
